pipeline{
	agent any
	
	stages{
		stage('build mvn'){
			agent{ 
				dockerfile {
				   args "-v /var/lib/jenkins/docker-m2:/root/.m2"
				}
			}
			steps {
			   	sh 'mvn clean verify'
			   	sh "sleep 60"
			   	
			   	
			   
			}

		}
		stage("second"){
			agent{
				docker{
				    image "mysql"
				    args "-e MYSQL_ROOT_PASSWORD=123456"
				}
			}
		    steps{
		        sh "sleep 3600"
		       
		    }
		}

	}
	post{
		always{
			sh 'docker system prune -f' 
		}            
	}

}
