pipeline{
	agent{ 
		dockerfile{
    		args "-p 8080:8080"
    		additionalBuildArgs '-t webapp-docker'
		}

	}
	stages{
		stage('build mvn'){
			steps {
			
			
				
			   	sh 'mvn clean verify' 
			   	
			   
			}

    
		}
		
		
		stage("clean docker images"){
			steps{
				sh "docker image rm webapp-docker" 
			}            
		}


	   
	}

}
