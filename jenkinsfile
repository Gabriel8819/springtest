pipeline{
	agent any
	
	environment{
	    MYSQL_DOCKER_ARGS="""--name mysqldb-test --network=skynet -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_USER=gabriel 
	    -e MYSQL_PASSWORD=123456 -e MYSQL_DATABASE=spring """
	    APP_DOCKER_ARGS=""" """
	}

	
	stages{
		stage('build mvn'){
			steps {
				sh 'docker network create skynet'
			
			   	docker.image("mysql").withRun('${MYSQL_DOCKER_ARGS}'){ c ->
			   		
			   		sh 'until mysqladmin ping -hmysqldb-test -ugabriel -p123456; do sleep 1; done'
			   		
			   		sh 'sleep 3600';
			   	    
			   	}
			   
			}

		}

	}
	

}
